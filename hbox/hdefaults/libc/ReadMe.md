# 说明

此目录用于对C运行库的部分函数进行包装。

# 目录说明

- [wrapper](wrapper)：包装C运行库库函数

# 外部配置的宏定义

| 宏定义                          | 说明              | 备注                                                         |
| ------------------------------- | ----------------- | ------------------------------------------------------------ |
| `HDEFAULTS_LIBC_OPTIMIZE_LEVEL` | C运行库优化级别。 | 默认优化级别为0（直接包装原C运行库的函数）,无操作系统时优化级别为1。 |
| `HDEFAULTS_LIBC_TINY_STRCMP`    | 采用精简版strcmp  | 某些工具链的C库可能有问题，可启用此选项使用内置精简版strcmp  |
| `HDEFAULTS_LIBC_TINY_STRNCMP`   | 采用精简版strncmp | 某些工具链的C库可能有问题，可启用此选项使用内置精简版strncmp |
| `HDEFAULTS_LIBC_TINY_STRLEN`    | 采用精简版strlen  | 某些工具链的C库可能有问题，可启用此选项使用内置精简版strlen  |
| `HDEFAULTS_LIBC_TINY_MEMSET`    | 采用精简版memset  | 某些工具链的C库可能有问题，可启用此选项使用内置精简版memset  |

# C运行库

## `putchar`

将字符输出到标准输出上。

可外部配置的宏定义如下:

| 宏定义     | 说明                | 备注                     |
| ---------- | ------------------- | ------------------------ |
| `HPUTCHAR` | 用户实现的`putchar` | 参数与返回值同`hputchar` |

## `getchar`

从标准输入上读取字符。

可外部配置的宏定义如下:

| 宏定义     | 说明                | 备注                     |
| ---------- | ------------------- | ------------------------ |
| `HGETCHAR` | 用户实现的`getchar` | 参数与返回值同`hgetchar` |

## `getenv`

获取环境变量。

除了通过启动应用时的命令传递参数外，也可通过环境变量传递参数。

可外部配置的宏定义如下:

| 宏定义    | 说明               | 备注                    |
| --------- | ------------------ | ----------------------- |
| `HGETENV` | 用户实现的`getenv` | 参数与返回值同`hgetenv` |

## `malloc`

内存分配

注意：内存相关配置不在libc包装中做，而在hdefaults组件。

## `free`

内存释放

注意：内存相关配置不在libc包装中做，而在hdefaults组件。

## `calloc`

内存分配（初始化为0）

注意：内存相关配置不在libc包装中做，而在hdefaults组件。

## `realloc`

内存重新分配。

注意：内存相关配置不在libc包装中做，而在hdefaults组件。

## `abort`

通过Abort信号退出程序

可外部配置的宏定义如下:

| 宏定义   | 说明              | 备注                   |
| -------- | ----------------- | ---------------------- |
| `HABORT` | 用户实现的`abort` | 参数与返回值同`habort` |

## `exit`

在主线程退出程序（将执行清理代码）

可外部配置的宏定义如下:

| 宏定义  | 说明             | 备注                  |
| ------- | ---------------- | --------------------- |
| `HEXIT` | 用户实现的`exit` | 参数与返回值同`hexit` |

## `fputs`

向文件输出字符串。

可外部配置的宏定义如下:

| 宏定义   | 说明              | 备注                   |
| -------- | ----------------- | ---------------------- |
| `HFPUTS` | 用户实现的`fputs` | 参数与返回值同`hfputs` |

## `vfprintf`

向文件输出字符串(格式化输出)。

可外部配置的宏定义如下:

| 宏定义      | 说明                 | 备注                      |
| ----------- | -------------------- | ------------------------- |
| `HVFPRINTF` | 用户实现的`vfprintf` | 参数与返回值同`hvfprintf` |

## `fprintf`

向文件输出字符串(格式化输出)。

**注意：默认采用`vfprintf`实现。**

## `puts`

输出字符串。

可外部配置的宏定义如下:

| 宏定义  | 说明             | 备注                  |
| ------- | ---------------- | --------------------- |
| `HPUTS` | 用户实现的`puts` | 参数与返回值同`hputs` |

## `ferror`

获取文件错误

可外部配置的宏定义如下:

| 宏定义    | 说明               | 备注                    |
| --------- | ------------------ | ----------------------- |
| `HFERROR` | 用户实现的`ferror` | 参数与返回值同`hferror` |

## `fread`

读取文件

可外部配置的宏定义如下:

| 宏定义   | 说明              | 备注                   |
| -------- | ----------------- | ---------------------- |
| `HFREAD` | 用户实现的`fread` | 参数与返回值同`hfread` |

## `fwrite`

写入文件

可外部配置的宏定义如下:

| 宏定义    | 说明               | 备注                    |
| --------- | ------------------ | ----------------------- |
| `HFWRITE` | 用户实现的`fwrite` | 参数与返回值同`hfwrite` |

## `time`

获取当前日历时间

可外部配置的宏定义如下:

| 宏定义  | 说明             | 备注                  |
| ------- | ---------------- | --------------------- |
| `HTIME` | 用户实现的`time` | 参数与返回值同`htime` |

## `clock`

获取当前处理器时间(类似节拍)

可外部配置的宏定义如下:

| 宏定义   | 说明              | 备注                   |
| -------- | ----------------- | ---------------------- |
| `HCLOCK` | 用户实现的`clock` | 参数与返回值同`hclock` |

## `strcmp`

字符串比较

可外部配置的宏定义如下:

| 宏定义    | 说明               | 备注                    |
| --------- | ------------------ | ----------------------- |
| `HSTRCMP` | 用户实现的`strcmp` | 参数与返回值同`hstrcmp` |

## `strncmp`

字符串比较指定长度字符

可外部配置的宏定义如下:

| 宏定义     | 说明                | 备注                     |
| ---------- | ------------------- | ------------------------ |
| `HSTRNCMP` | 用户实现的`strncmp` | 参数与返回值同`hstrncmp` |

## `strlen`

获取以NULL结尾的字符串的长度

可外部配置的宏定义如下:

| 宏定义    | 说明               | 备注                    |
| --------- | ------------------ | ----------------------- |
| `HSTRLEN` | 用户实现的`strlen` | 参数与返回值同`hstrlen` |

## `memset`

填充内存

可外部配置的宏定义如下:

| 宏定义    | 说明               | 备注                    |
| --------- | ------------------ | ----------------------- |
| `HMEMSET` | 用户实现的`memset` | 参数与返回值同`hmemset` |
